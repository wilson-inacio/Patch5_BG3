---
title: "Did Patch 5 Causally Increase Player Engagement in Baldur's Gate 3?"
author: "Wilson Inacio"
date: "2026-01-20"
output: html_document
---

# Scope
## Project Goals
`Baldur's Gate 3` is a RPG game that was released for PCs on the 3rd of August 2023, and saw unprecedented acclaim. The game had a massive expansion on it's fifth patch, released November 30th, which included:<br>
 - A new epilogue giving closure to some characters<br>
 - Honour mode, a new difficulty mode with stricter rules and a single save file<br>
 - Custom mode, allowing players to customize various gameplay settings<br>
 - Performance improvements, particularly in Act 3<br>
 - Quality of life improvements throughout<br>
With this project, rather than studying the lunch effects of the game, I'll estimate the causal effects of the post-launch content update of Patch 5 on engagement using a Difference-in-Differences framework.

## Data
Daily player engagement data were obtained from Steam Charts, a public aggregation of Steam usage statistics. For each game, daily average player counts were extracted and aggregated into weekly averages for analysis.

## Analysis
This project will estimate the impact of `Baldur's Gate 3` Patch 5 on player engagement on Steam. Patch 5 was specifically chosen for our treatment as it is a major update to the game, far enough from the launch date so that the initial launch spike had already decayed and the player counts had reached a stable trajectory.<br>
With this in mind, engagement might still be affected by word of mouth growth and the award season buzz.

The estimated treatment effect may partially capture increased visibility from awards that coincided with the post-treatment period, notably the *Golden Joysticks Awards* on November 11, 2023, and *The Game Awards* on December 7, 2023.

Two control groups will be used: Player engagement of `Divinity: Original Sin 2` and player engagement of `Disco Elysium`.<br>
This games were chosen as they are similar in gameplay and content to `Baldur's Gate 3` but didn't had any new content, patches or DLCs released around the time of our treatment date.<br>
There were also no Steam sales that could have influenced the player count of any of the games, as the only Steam sales that occored around the treatment date were winter sales affecting all games.<br>
These take-aways allow us to make some key assumptions:<br>
 - Parallel Trends: Both the treated unit and the control groups show similar player engagement before the release of Patch 5, an assumption to be verified or rejected later in this project.<br>
 - SUTVA: The release of Patch 5 for `Baldur's Gate 3` doesn't affect the average daily player count of the control group games.<br>
 - There is no concurrent shock: As verified, there were no DLCs, sales or other external factors that could affect the average player count of the games in the control group.
 
This table summarizes the treatment of this project:

|Component|Name|
|---|---|
|Treated Unit|Baldur's Gate 3|
|Treatment|Patch 5|
|Treatment Date|November 30th, 2023|
|Outcome|Average Daily Steam Players|
|Control Groups|Divinity: Original Sin 2 + Disco Elysium|
|Method|DiD + Event Study|

#### Importing libraries and data
```{r Setup, warning= FALSE, message = FALSE}
# Importing relevant libraries
library(jsonlite)
library(ggplot2)
library(dplyr)
library(lubridate) # Easy date time operations

# Importing data from JSON files
bg3 <- fromJSON("data/bg3.json")
div2 <- fromJSON("data/divinity2.json")
de <- fromJSON("data/disco_elysium.json")

# Converting into proper dataframes and adding column names
bg3_df <- as.data.frame(bg3)
colnames(bg3_df) <- c("time_ms", "avg_players")

div2_df <- as.data.frame(div2)
colnames(div2_df) <- c("time_ms", "avg_players")

de_df <- as.data.frame(de)
colnames(de_df) <- c("time_ms", "avg_players")

#Previewing the first 3 lines of each df
head(bg3_df, 3)
head(div2, 3)
head(de, 3)
```

Since the dataframes imported from the Steam Charts webpage have the time in milliseconds, it needs to be converted to weekly average so we can proceed with our analysis. Upomn further investigation, I came to the conclusion that Steam Charts provides time series at varying temporal resolutions. To ensure consistent weekly aggregation, the analysis restricts the sample to the post-launch period in which daily observations are available.

```{r Conversion and Combining, warning=FALSE, message = FALSE}
# Convert time_ms → Date
bg3_df <- bg3_df %>% 
  mutate(date = as.Date(as.POSIXct(time_ms / 1000, origin="1970-01-01", tz="UTC")))
div2_df <- div2_df %>% 
  mutate(date = as.Date(as.POSIXct(time_ms / 1000, origin="1970-01-01", tz="UTC")))
de_df <- de_df %>% 
  mutate(date = as.Date(as.POSIXct(time_ms / 1000, origin="1970-01-01", tz="UTC")))

# Add game label before merging
bg3_df$game <- "BG3"
div2_df$game <- "Div2"
de_df$game <- "DE"

# Merge all games
games_df <- bind_rows(bg3_df, div2_df, de_df)

# Filter from when data stops being monthly and begins being daily
games_df <- games_df %>%
  filter(date >= as.Date("2023-08-01"))

# Aggregate to weekly averages using floor_date
games_df_weekly <- games_df %>%
  group_by(game, week_start = lubridate::floor_date(date, unit = "week", week_start = 1)) %>%
  summarise(avg_players = mean(avg_players, na.rm = TRUE),
  .groups = "drop")

# Confirming games_df_weekly structure and column names
str(games_df_weekly)
summary(games_df_weekly)
```

The dataframe if set up with a column for the game, one for the week and one for the average number of players for that week. we can now limit the timeframe that will be analysed. The analysis window chosen spans from the second of October 2023, shortly after the game's launch through February 4th, providing a sufficient long pre-treatment period to assess parallel trends and a focused post-treatment window to capture the short-run engagement effects of Patch 5 while limiting exposure to additional confounding events.

|Phase|Dates|
|---|---|
|Pre-treatment|02/10/2023 -> 29/11/2023|
|Treatment|30/11/2023|
|Post-treatment|01/12/2023 -> 04/02/2024|

```{r}
# Narrowing the weeks to the treatment window
window_df <- games_df_weekly %>%
  filter(week_start >= as.Date("2023-10-02") & week_start <= as.Date("2024-02-04"))

# Observing the range
range(window_df$week_start)
```

Finally the dataframe is ready. Let's proceed with a visual representation of the weekly average players per game.

```{r}
games_plot <- window_df %>% 
  ggplot(
  aes(x = week_start,
      y = avg_players, 
      color = game
      )) + 
  geom_line(size = 1.1) +
  geom_vline(
    xintercept = as.Date("2023-11-30"),
    color = "orangered",
    linetype = "dashed") +
  geom_vline(
    xintercept = c(as.Date("2023-11-10"), as.Date("2023-12-07")),
    color = "gold",
    linetype = "dotdash") +
  labs(title = "Weekly Player Count", 
       subtitle = "Patch 5 release indicated by red line\nAwards won indicated by yellow line",
       x = "Week Start",
       y = "Player Count") +
  scale_y_continuous(breaks = seq(0,300000, by = 50000))
games_plot
```

The plot produced by our analysis suggests that `Baldur's Gate 3` already had a steeper pre-treatment growth relative to controls, indicating a potential violation of the parallel trends assumption. To address this, I complement the Difference-in-Differences analysis with an event-study specification to examine dynamic treatment effects and pre-trends.


#### Baseline DiD model
This baseline Difference-in-Differences model serves as a preliminary estimate and is interpreted cautiously given evidence of divergent pre-treatment trends.

```{r}
# Baseline Difference-in-Differences
window_df <- window_df %>%
  mutate(
    treatment = ifelse(game == "BG3", 1, 0),
    post = ifelse(week_start >= as.Date("2023-11-30"), 1, 0)
  )

did_baseline <- lm(avg_players ~ treatment * post, data = window_df)
summary(did_baseline)
```

The baseline Difference-in-Differences estimate yields a positive but statistically insignificant interaction term between treatment and post-treatment period. This suggests that, once baseline differences are accounted for, there is no strong evidence of a discrete increase in player engagement immediately following Patch 5. Given the visibly steeper pre-treatment trend for `Baldur’s Gate 3`, this result is consistent with concerns regarding the parallel trends assumption and motivates a more flexible event-study approach.

```{r}
# Event Study
patch_date <- as.Date("2023-11-30")

event_df <- window_df %>%
  mutate(
    week_relative = as.integer(difftime(week_start, patch_date, units = "weeks")),
    treatment = ifelse(game == "BG3", 1, 0)
  )

table(event_df$week_relative)
```

